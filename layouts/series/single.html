{{define "main"}}

<article class="post mx-auto p-4">
  <div class="flex justify-center">
    <h1 class="font-semibold">{{.Params.title}}</h1>
  </div>

  <span
    class="text-bold text-sm text-gray-700"
    >{{.Date.Format "Jan 2, 2006"}}</span
  >
  {{if .IsTranslated}}
  {{ range.Translations }}
  <p class="mt-2">
    <em>
      This blog post is also translated in
      <a
        class="text-indigo-700 underline"
        href="{{.Permalink}}"
        >{{.Language.LanguageName}}</a
      >
    </em>
  </p>
  {{ end }}
  {{ end }}
  <div class="mt-2">
    <em>This page is part of {{.Params.series}}</em>

    {{ $series := $.Page.Params.series }}
    {{ $scratch := newScratch }}
    {{ $scratch.Set "count" 0}}
      <div class="my-4 flex flex-col ">
        {{ range $ind,$art := $.Site.Pages }}
        {{ if eq $art.Params.series $series }}
          {{ $scratch.Add "count" 1}}
          {{ if eq $art.Permalink $.Page.Permalink}}
          <div class="series-el line-through"><a href="{{ $art.Permalink }}">{{ $art.Params.title }}</a></div>
          {{ else }}
          <div class="series-el"><a href="{{ $art.Permalink }}">{{ $art.Params.title }}</a></div>
          {{ end }}
        {{end}}
        {{end}}
        <div class="bg-purple-500 p-2 order-first font-bold">{{$series | title }} ({{$scratch.Get "count"}} PART SERIES)</div>
      </div>
    {{.Content}}
  </div>
</article>
{{ end }}
